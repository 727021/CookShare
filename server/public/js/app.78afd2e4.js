(function(e){function t(t){for(var r,s,a=t[0],c=t[1],l=t[2],d=0,f=[];d<a.length;d++)s=a[d],Object.prototype.hasOwnProperty.call(i,s)&&i[s]&&f.push(i[s][0]),i[s]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(e[r]=c[r]);u&&u(t);while(f.length)f.shift()();return o.push.apply(o,l||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],r=!0,a=1;a<n.length;a++){var c=n[a];0!==i[c]&&(r=!1)}r&&(o.splice(t--,1),e=s(s.s=n[0]))}return e}var r={},i={app:0},o=[];function s(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=e,s.c=r,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)s.d(n,r,function(t){return e[t]}.bind(null,r));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/";var a=window["webpackJsonp"]=window["webpackJsonp"]||[],c=a.push.bind(a);a.push=t,a=a.slice();for(var l=0;l<a.length;l++)t(a[l]);var u=c;o.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"034f":function(e,t,n){"use strict";var r=n("85ec"),i=n.n(r);i.a},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("2b0e"),i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("Header",{attrs:{user:e.user},on:{"show-login":function(t){return e.$refs.loginModal.show()},"show-register":function(t){return e.$refs.registerModal.show()},logout:e.doLogout}}),n("router-view",{attrs:{user:e.user},on:{401:e._401,500:e._500}}),n("Footer"),n("LoginModal",{ref:"loginModal",on:{401:e.doGetUser,500:e._500,"show-register":function(t){return e.$refs.registerModal.show()},"login-success":e.finishLogin}}),n("RegisterModal",{ref:"registerModal",on:{401:e.doGetUser,500:e._500,"show-login":function(t){return e.$refs.loginModal.show()},"register-success":e.finishRegister}})],1)},o=[],s=(n("b0c0"),n("d3b7"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-navbar",{attrs:{toggleable:"lg",type:"dark",variant:"dark",fixed:"top"}},[n("b-container",[n("b-navbar-toggle",{attrs:{target:"top-nav-collapse"}}),n("b-collapse",{staticClass:"text-center text-lg-left",attrs:{id:"top-nav-collapse","is-nav":""}},[n("b-navbar-brand",[e._v("CookShare")]),n("hr",{staticClass:"d-lg-none"}),n("b-navbar-nav",[n("b-nav-item",{attrs:{to:"/",exact:!0}},[e._v("Home")]),n("b-nav-item",{attrs:{to:"/recipes"}},[e._v("Recipes")]),n("b-nav-item",{attrs:{to:"/cookbooks"}},[e._v("Cookbooks")])],1),n("hr",{staticClass:"d-lg-none"}),e.user?n("b-navbar-nav",{staticClass:"ml-auto"},[n("b-nav-item",{attrs:{to:"/profile",exact:!0}},[e._v(e._s(e.user.username))]),n("b-nav-item",{attrs:{href:"/logout"},on:{click:function(t){return t.preventDefault(),e.$emit("logout")}}},[e._v("Log Out")])],1):n("b-navbar-nav",{staticClass:"ml-auto"},[n("b-nav-item",{attrs:{href:"/login"},on:{click:function(t){return t.preventDefault(),e.$emit("show-login")}}},[e._v("Log In")]),n("b-nav-text",{staticClass:"d-none d-lg-inline-block"},[e._v("or")]),n("b-nav-item",{attrs:{href:"/register"},on:{click:function(t){return t.preventDefault(),e.$emit("show-register")}}},[e._v("Create Account")])],1)],1)],1)],1)}),a=[],c={name:"Header",props:["user"]},l=c,u=n("2877"),d=Object(u["a"])(l,s,a,!1,null,"0663e1bb",null),f=d.exports,p=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-navbar",{attrs:{type:"dark",variant:"dark",fixed:"bottom"}},[n("b-container",[n("b-navbar-nav",[n("b-nav-item",{attrs:{href:"https://727021.github.io",target:"_blank"}},[n("fa-icon",{attrs:{icon:["fab","github"]}})],1)],1),n("b-navbar-nav",{staticClass:"ml-auto"},[n("b-nav-text",[e._v("Â©2020"+e._s(2020===(new Date).getFullYear()?"":"-"+(new Date).getFullYear()))])],1)],1)],1)},m=[],b={name:"Footer"},v=b,g=Object(u["a"])(v,p,m,!1,null,null,null),h=g.exports,k=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-modal",{attrs:{id:"loginModal",scrollable:"","no-stacking":"",title:"Log In"},on:{hidden:e.clear},scopedSlots:e._u([{key:"modal-header-close",fn:function(){return[n("fa-icon",{attrs:{icon:"times"}})]},proxy:!0},{key:"modal-footer",fn:function(){return[n("b-btn",{staticClass:"mr-auto",attrs:{variant:"link",disabled:""}},[e._v("Forgot Password")]),n("b-btn",{attrs:{variant:"outline-secondary"},on:{click:function(t){return e.$emit("show-register")}}},[e._v("Create Account")]),n("b-btn",{attrs:{variant:"primary"},on:{click:function(t){return t.preventDefault(),e.submit(t)}}},[e._v("Log In")])]},proxy:!0}])},[e.error?n("b-alert",{attrs:{show:"",variant:"danger"}},[e._v(e._s(e.error))]):e._e(),n("b-form-group",[n("b-form-input",{attrs:{placeholder:"Username/email",autocomplete:"current-username"},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.preventDefault(),e.submit(t))}},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}})],1),n("b-form-group",[n("b-form-input",{attrs:{placeholder:"Password",autocomplete:"current-password",type:"password"},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.preventDefault(),e.submit(t))}},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})],1)],1)},_=[],w=n("f90c"),y=n("bc3a"),C=n.n(y),x=function(){var e=localStorage.getItem("token");return e?{headers:{Authorization:"Bearer ".concat(e)}}:void 0},$=function(e){return C.a.get(e,x())},S=function(e,t){return C.a.post(e,t,x())},O=function(e,t){return C.a.put(e,t,x())},j=function(e){return C.a.delete(e,x())},E=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:200;return e.then((function(e){var n=e.data;return Promise.resolve({status:t,data:n})})).catch((function(e){var t=e.response,n=t.status,r=t.data;return Promise.resolve({status:n,data:r})}))},M=200,I=201,R=204,D=401,z=409,P=422,F="/api/auth",L=function(e,t){return E(O(F,Object(w["isEmail"])(e||"")?{email:e,password:t}:{username:e,password:t}))},U=function(e,t,n,r,i,o){return E(S(F,{username:e,email:t,firstname:n,lastname:r,password:i,confirm:o}),I)},N=function(){return j(F).then((function(){return Promise.resolve()})).catch((function(){return Promise.resolve()}))},A={name:"LoginModal",data:function(){return{username:"",password:"",error:""}},methods:{clear:function(){this.username="",this.password="",this.error=""},submit:function(){var e=this;L(this.username,this.password).then((function(t){var n=t.status,r=t.data;switch(n){case M:localStorage.setItem("token",r.token),e.$emit("login-success");break;case D:e.$emit("401");break;case P:e.error=r.error||"Invalid Login";break;default:e.$emit("500");break}})).catch((function(t){e.$emit("500",t)}))},show:function(e){e&&(this.username=e),this.$bvModal.show("loginModal")},hide:function(){this.$bvModal.hide("loginModal")}}},B=A,T=Object(u["a"])(B,k,_,!1,null,null,null),H=T.exports,G=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-modal",{attrs:{id:"registerModal",scrollable:"","no-stacking":"",title:"Create Account"},on:{hidden:e.clear},scopedSlots:e._u([{key:"modal-header-close",fn:function(){return[n("fa-icon",{attrs:{icon:"times"}})]},proxy:!0},{key:"modal-footer",fn:function(){return[n("b-btn",{attrs:{variant:"outline-secondary"},on:{click:function(t){return e.$emit("show-login")}}},[e._v("Log In")]),n("b-btn",{attrs:{variant:"primary"},on:{click:function(t){return t.preventDefault(),e.submit(t)}}},[e._v("Create Account")])]},proxy:!0}])},[n("b-form-group",{attrs:{"invalid-feedback":e.errors.username}},[n("b-form-input",{attrs:{state:!(e.errors.username.length>0)&&null,placeholder:"Username",autocomplete:"username"},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.preventDefault(),e.submit(t))}},model:{value:e.values.username,callback:function(t){e.$set(e.values,"username",t)},expression:"values.username"}})],1),n("b-form-group",{attrs:{"invalid-feedback":e.errors.email}},[n("b-form-input",{attrs:{state:!(e.errors.email.length>0)&&null,type:"email",placeholder:"Email",autocomplete:"email"},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.preventDefault(),e.submit(t))}},model:{value:e.values.email,callback:function(t){e.$set(e.values,"email",t)},expression:"values.email"}})],1),n("b-form-group",{attrs:{"invalid-feedback":e.errors.firstname}},[n("b-form-input",{attrs:{state:!(e.errors.firstname.length>0)&&null,placeholder:"First name",autocomplete:"given-name"},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.preventDefault(),e.submit(t))}},model:{value:e.values.firstname,callback:function(t){e.$set(e.values,"firstname",t)},expression:"values.firstname"}})],1),n("b-form-group",{attrs:{"invalid-feedback":e.errors.lastname}},[n("b-form-input",{attrs:{state:!(e.errors.lastname.length>0)&&null,placeholder:"Last name",autocomplete:"family-name"},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.preventDefault(),e.submit(t))}},model:{value:e.values.lastname,callback:function(t){e.$set(e.values,"lastname",t)},expression:"values.lastname"}})],1),n("b-form-group",{attrs:{"invalid-feedback":e.errors.password}},[n("b-form-input",{attrs:{state:!(e.errors.password.length>0)&&null,type:"password",placeholder:"Password",autocomplete:"new-password"},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.preventDefault(),e.submit(t))}},model:{value:e.values.password,callback:function(t){e.$set(e.values,"password",t)},expression:"values.password"}})],1),n("b-form-group",{attrs:{"invalid-feedback":e.errors.confirm}},[n("b-form-input",{attrs:{state:!(e.errors.confirm.length>0)&&null,type:"password",placeholder:"Confirm password",autocomplete:"new-password"},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.preventDefault(),e.submit(t))}},model:{value:e.values.confirm,callback:function(t){e.$set(e.values,"confirm",t)},expression:"values.confirm"}})],1)],1)},V=[],q=(n("7db0"),n("ddb0"),{name:"RegisterModal",data:function(){return{values:{username:"",email:"",firstname:"",lastname:"",password:"",confirm:""},errors:{username:"",email:"",firstname:"",lastname:"",password:"",confirm:""}}},methods:{clear:function(){for(var e in this.values)this.values[e]="";for(var t in this.errors)this.errors[t]=""},submit:function(){var e=this;U(this.values.username,this.values.email,this.values.firstname,this.values.lastname,this.values.password,this.values.confirm).then((function(t){var n=t.status,r=t.data;switch(n){case I:e.$emit("register-success",e.values.username);break;case D:e.$emit("401");break;case P:var i=function(t){e.errors[t]=(r.errors.find((function(e){return e.param===t}))||{msg:""}).msg};for(var o in e.errors)i(o);break;default:e.$emit("500");break}})).catch((function(t){e.$emit("500",t)}))},show:function(){this.$bvModal.show("registerModal")},hide:function(){this.$bvModal.hide("registerModal")}}}),J=q,Y=Object(u["a"])(J,G,V,!1,null,null,null),W=Y.exports,K="/api/user",Q=function(e){return E($("".concat(K).concat(e?"/".concat(e):"")))},X=function(e){return E(S("".concat(K,"/favorites/").concat(e),{}),I)},Z=function(e){return E(j("".concat(K,"/favorites/").concat(e),{}),R)},ee={name:"app",components:{Header:f,Footer:h,LoginModal:H,RegisterModal:W},data:function(){return{redirect:void 0,user:void 0}},methods:{finishLogin:function(){var e=this;this.$refs.loginModal.hide(),this.doGetUser().then((function(){e.redirect&&e.$router.push(e.redirect)}))},finishRegister:function(e){this.$refs.loginModal.show(e)},doLogout:function(){var e=this;N().catch((function(t){e._500(t)})).finally((function(){e.user=void 0,localStorage.removeItem("token"),"/"!==e.$router.currentRoute.path&&e.$router.push("/")}))},doGetUser:function(){var e=this;return Q().then((function(t){var n=t.status,r=t.data;switch(n){case M:e.user=r;break;case D:e._401();break;default:e._500();break}})).catch((function(t){e._500(t)}))},_500:function(e){e&&console.error(e),this.$refs.loginForm.hide(),this.$refs.registerForm.hide(),this.$router.push("/500")},_401:function(){this.user=void 0,localStorage.removeItem("token")}},mounted:function(){var e=this;this.doGetUser(),this.$router.onError((function(t){"NotLoggedIn"===t.name&&(e.redirect=t.message,e.$bvModal.show("loginModal"))}))}},te=ee,ne=(n("034f"),Object(u["a"])(te,i,o,!1,null,null,null)),re=ne.exports,ie=n("8c4f"),oe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-container",[n("h1",{staticClass:"border-bottom"},[e._v("Home")])])},se=[],ae={name:"Home"},ce=ae,le=Object(u["a"])(ce,oe,se,!1,null,null,null),ue=le.exports,de=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},fe=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"container"},[n("h1",{staticClass:"border-bottom"},[e._v("Profile")])])}],pe={name:"Profile"},me=pe,be=Object(u["a"])(me,de,fe,!1,null,null,null),ve=be.exports,ge=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-container",["view"===e.mode?n("RecipeView",{attrs:{recipe:e.currentRecipe},on:{close:e.close}}):"edit"===e.mode?n("RecipeEdit",{attrs:{recipe:e.currentRecipe,recipes:e.recipes},on:{401:function(t){return e.$emit("401")},500:e._500,close:e.close}}):n("div",[n("h1",{staticClass:"border-bottom"},[e._v(" Recipes "),e.loading?n("b-spinner",{staticClass:"m-2",staticStyle:{"border-width":"4px"}}):n("b-btn",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.left",modifiers:{hover:!0,left:!0}}],staticClass:"float-right m-1 my-2",attrs:{variant:"outline-success",title:"New Recipe"},on:{click:e.openCreate}},[n("fa-icon",{attrs:{icon:"plus"}})],1)],1),e.recipes&&e.recipes.length>0?n("b-card-group",{attrs:{columns:""}},e._l(e.recipes,(function(t){return n("RecipeCard",{key:t._id,ref:t._id,refInFor:!0,attrs:{recipe:t,recipes:e.recipes,user:e.user},on:{401:function(t){return e.$emit("401")},500:e._500,view:e.openView,edit:e.openEdit,deleteRecipe:e.doDeleteRecipe}})})),1):e.recipes&&0===e.recipes.length?n("h5",{staticClass:"text-center"},[e._v(" No recipes ")]):e._e()],1)],1)},he=[],ke=(n("4de4"),n("2909")),_e=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-card",{attrs:{"img-src":e.recipe.image,"img-top":e.recipe.image},scopedSlots:e._u([{key:"footer",fn:function(){return[n("b-btn-toolbar",[e.recipe.author===e.user._id||e.recipe.author._id===e.user._id?n("b-btn-group",{attrs:{size:"sm"}},[n("b-btn",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.left",modifiers:{hover:!0,left:!0}}],attrs:{variant:"outline-danger",title:"Delete"},on:{click:function(t){return e.$emit("deleteRecipe",e.recipe)}}},[n("fa-icon",{attrs:{icon:"trash-alt"}})],1),n("b-btn",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.right",modifiers:{hover:!0,right:!0}}],attrs:{variant:"outline-primary",title:"Edit"},on:{click:function(t){return e.$emit("edit",e.recipe)}}},[n("fa-icon",{attrs:{icon:"pencil-alt"}})],1)],1):n("b-btn-group",{attrs:{size:"sm"}},[n("b-btn",{attrs:{variant:"link",disabled:""},on:{click:function(e){e.preventDefault()}}},[e._v(" "+e._s(e.recipe.author.username)+" ")])],1),n("b-btn-group",{staticClass:"ml-auto",attrs:{size:"sm"}},[n("b-btn",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.left",modifiers:{hover:!0,left:!0}}],attrs:{variant:"outline-primary",title:"Print",href:"/pdf/"+e.recipe._id+"?access_token="+e.token(),target:"_blank"}},[n("fa-icon",{attrs:{icon:"print"}})],1),n("b-btn",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.right",modifiers:{hover:!0,right:!0}}],attrs:{variant:e.isFavorite()?"danger":"outline-danger","text-variant":{white:e.isFavorite()},title:e.isFavorite()?"Unfavorite":"Favorite"},on:{click:e.toggleFavorite}},[n("fa-icon",{attrs:{icon:[e.isFavorite()?"fas":"far","heart"]}})],1)],1)],1)]},proxy:!0}])},[n("b-card-title",{staticClass:"my-0"},[n("b-btn",{staticClass:"py-0",attrs:{variant:"link",size:"lg"},on:{click:function(t){return e.$emit("view",e.recipe)}}},[e._v(e._s(e.recipe.title))])],1),e.recipe.description?n("b-card-body",[n("b-card-text",[e._v(e._s(e.recipe.description))])],1):e._e()],1)},we=[],ye=(n("c975"),n("45fc"),n("a434"),n("15fd")),Ce=(n("99af"),n("4160"),n("b64b"),n("159b"),n("53ca")),xe=function e(t,n,r){!n||"object"!==Object(Ce["a"])(n)||n instanceof Date||n instanceof File||Array.isArray(n)&&!n.length?null!==n&&void 0!==n&&t.append(r,n):Object.keys(n).forEach((function(i){e(t,n[i],r?"".concat(r,"[").concat(i,"]"):i)}))},$e=function(e){var t=new FormData;return xe(t,e),t},Se="/api/recipe",Oe=function(){return E($(Se))},je=function(e){return E(S(Se,$e(e)),I)},Ee=function(e){var t=e._id,n=Object(ye["a"])(e,["_id"]);return E(O("".concat(Se,"/").concat(t),$e(n)))},Me=function(e){return E(j("".concat(Se,"/").concat(e._id)),R)},Ie={name:"RecipeCard",props:["recipe","recipes","user"],methods:{isFavorite:function(){var e=this.recipe._id;return this.user.favorites.some((function(t){return t===e}))},toggleFavorite:function(){var e=this,t=this.user.favorites.indexOf(this.recipe._id);t>=0?Z(this.recipe._id).then((function(n){var r=n.status;n.data;switch(r){case R:e.user.favorites.splice(t,1);break;case D:e.$emit("401"),e.$router.push("/");break;default:e.$emit("500");break}})).catch((function(t){e.$emit("500",t)})):X(this.recipe._id).then((function(t){var n=t.status,r=t.data;switch(n){case I:e.user.favorites=r;break;case D:e.$emit("401"),e.$router.push("/");break;default:e.$emit("500");break}})).catch((function(t){e.$emit("500",t)}))},token:function(){return localStorage.getItem("token")}}},Re=Ie,De=Object(u["a"])(Re,_e,we,!1,null,null,null),ze=De.exports,Pe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("h1",{staticClass:"border-bottom border-secondary"},[e._v(" "+e._s(e.recipe.title)+" "),n("small",{staticClass:"ml-3"},[n("small",[n("b",[e._v("Servings:")]),e._v(" "+e._s(e.recipe.serving.count*e.multiplier)+" "),n("b",[e._v("Serving Size:")]),e._v(" "+e._s(e.recipe.serving.size)+" "+e._s(e.recipe.serving.units)+" ")])]),n("b-btn",{staticClass:"float-right m-1 my-2",attrs:{variant:"outline-danger"},on:{click:function(t){return e.$emit("close")}}},[n("fa-icon",{attrs:{icon:"times"}})],1),n("b-btn",{staticClass:"float-right m-1 my-2",attrs:{variant:"outline-primary",href:"/pdf/"+e.recipe._id+"?access_token="+e.token(),target:"_blank"}},[n("fa-icon",{attrs:{icon:"print"}})],1)],1),n("b-select",{staticClass:"float-right",staticStyle:{width:"5rem"},attrs:{options:[{value:.25,text:"x0.25",disabled:.25*e.recipe.serving.count<1},{value:.5,text:"x0.5",disabled:.5*e.recipe.serving.count<1},{value:1,text:"x1"},{value:2,text:"x2"},{value:3,text:"x3"}]},model:{value:e.multiplier,callback:function(t){e.multiplier=t},expression:"multiplier"}}),n("b-textarea",{staticClass:"w-75 py-0 ml-3",attrs:{readonly:"",plaintext:"","no-resize":""},model:{value:e.recipe.description,callback:function(t){e.$set(e.recipe,"description",t)},expression:"recipe.description"}}),e.recipe.image?n("b-carousel",{staticClass:"bg-dark py-2 text-center rounded"},[n("b-carousel-slide",{scopedSlots:e._u([{key:"img",fn:function(){return[n("img",{staticClass:"rounded",staticStyle:{height:"20rem"},attrs:{src:e.recipe.image}})]},proxy:!0}],null,!1,468486)})],1):e._e(),n("h4",{staticClass:"pt-3"},[e._v("Ingredients")]),n("b-list-group",e._l(e.recipe.ingredients,(function(t,r){var i=t.amount,o=t.units,s=t.name;return n("b-list-group-item",{key:r},[e._v(e._s(i*e.multiplier)+" "+e._s(o&&e.getFullUnit(o)?e.getFullUnit(o).abbr:"")+" "+e._s(s))])})),1),n("h4",{staticClass:"pt-3"},[e._v("Steps")]),n("b-list-group",e._l(e.recipe.steps,(function(t,r){return n("b-list-group-item",{key:r},[n("b",[e._v(e._s(r+1)+".")]),e._v(" "+e._s(t)+" ")])})),1)],1)},Fe=[],Le=(n("25f0"),n("498a"),n("d4ec")),Ue=n("bee2"),Ne=[],Ae=function(){function e(t,n,r,i,o,s,a){Object(Le["a"])(this,e),this.measure=t,this.system=n,this.abbr=r,this.singular=i,this.plural=o,this.toBase=s,this.fromBase=a,this.amount=void 0}return Object(Ue["a"])(e,null,[{key:"find",value:function(e){return e=e.toString(),Ne.find((function(t){return t.abbr===e||t.singular===e||t.plural===e}))}},{key:"exists",value:function(t){return Boolean(e.find(t))}},{key:"list",value:function(e){if(!e||""===e)return[].concat(Ne);switch(e=e.toString().toLowerCase().trim(),e){case"metric":return Ne.filter((function(e){return"metric"===e.system||""===e.system}));case"imperial":return Ne.filter((function(e){return"imperial"===e.system||""===e.system}));case"us":return Ne.filter((function(e){return"us"===e.system||""===e.system}));case"volume":return Ne.filter((function(e){return"volume"===e.measure}));case"mass":case"weight":return Ne.filter((function(e){return"mass"===e.measure}));case"amount":return Ne.filter((function(e){return"amount"===e.measure}));default:return[]}}}]),Object(Ue["a"])(e,[{key:"to",value:function(t){return"object"===Object(Ce["a"])(t)&&null!==t||(t=e.find(t)),new e(t,t.fromBase(this.toBase(this.amount||0)))}}]),e}();Ne.push(new Ae("mass","metric","g","gram","grams",(function(e){return e/28.35}),(function(e){return 28.35*e}))),Ne.push(new Ae("mass","imperial","oz","ounce","ounces",(function(e){return e}),(function(e){return e}))),Ne.push(new Ae("mass","imperial","lb","pound","pounds",(function(e){return e/16}),(function(e){return 16*e}))),Ne.push(new Ae("volume","metric","ml","milliliter","milliliters",(function(e){return e/29.574}),(function(e){return 29.527*e}))),Ne.push(new Ae("volume","metric","l","liter","liters",(function(e){return 33.814*e}),(function(e){return e/33.814}))),Ne.push(new Ae("volume","us","tsp","teaspoon","teaspoons",(function(e){return e/6}),(function(e){return 6*e}))),Ne.push(new Ae("volume","us","Tbs","tablespoon","tablespoons",(function(e){return e/2}),(function(e){return 2*e}))),Ne.push(new Ae("volume","us","fl-oz","fluid ounce","fluid ounces",(function(e){return e}),(function(e){return e}))),Ne.push(new Ae("volume","us","c","cup","cups",(function(e){return 8.115*e}),(function(e){return e/8.115}))),Ne.push(new Ae("volume","us","pt","pint","pints",(function(e){return 16*e}),(function(e){return e/16}))),Ne.push(new Ae("volume","us","qt","quart","quarts",(function(e){return 32*e}),(function(e){return e/32}))),Ne.push(new Ae("volume","us","gal","gallon","gallons",(function(e){return 128*e}),(function(e){return e/128}))),Ne.push(new Ae("amount","","","count","count",(function(e){return e}),(function(e){return e}))),Ne.push(new Ae("amount","","dzn","dozen","dozen",(function(e){return e/12}),(function(e){return 12*e})));var Be={name:"RecipeView",props:["recipe"],data:function(){return{multiplier:1}},methods:{getFullUnit:function(e){return Ae.find(e)},token:function(){return localStorage.getItem("token")}}},Te=Be,He=Object(u["a"])(Te,Pe,Fe,!1,null,null,null),Ge=He.exports,Ve=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("h1",{staticClass:"border-bottom border-secondary"},[e._v(" Editing "+e._s(e.editing.title||"Recipe")+" "),n("b-btn",{staticClass:"float-right m-1 my-2",attrs:{variant:"outline-danger"},on:{click:function(t){return e.$emit("close")}}},[n("fa-icon",{attrs:{icon:"times"}})],1),n("b-btn",{staticClass:"float-right m-1 my-2",attrs:{variant:"outline-success"},on:{click:e.save}},[n("fa-icon",{attrs:{icon:"save"}})],1),e.showSaved?n("b-btn",{staticClass:"text-success float-right m-1 my-2",attrs:{variant:"link",disabled:""}},[e._v("Saved")]):e._e(),e.showError?n("b-btn",{staticClass:"text-danger float-right m-1 my-2",attrs:{variant:"link",disabled:""}},[e._v("Error")]):e._e(),e.showSaving?n("b-btn",{staticClass:"text-success float-right m-1 my-2",attrs:{variant:"link",disabled:"",type:"button"}},[e._v("Saving...")]):e._e()],1),n("b-form-row",[n("b-col",{attrs:{cols:"7"}},[n("b-form-group",{staticClass:"m-0",attrs:{label:"Recipe Title"},scopedSlots:e._u([{key:"invalid-feedback",fn:function(){return[n("span",{staticClass:"float-left"},[e._v(e._s(e.errors.title))])]},proxy:!0},{key:"description",fn:function(){return[n("span",{staticClass:"float-right"},[e._v(e._s(e.editing.title.length)+"/64")])]},proxy:!0}])},[n("b-input",{attrs:{placeholder:"Recipe Title",state:!e.errors.title&&null,maxlength:"64"},model:{value:e.editing.title,callback:function(t){e.$set(e.editing,"title",t)},expression:"editing.title"}})],1)],1),n("b-col",{attrs:{cols:"2"}},[n("b-form-group",{staticClass:"m-0",attrs:{label:"Servings","invalid-feedback":e.errors.serving.count}},[n("b-input",{attrs:{type:"number",min:"1",step:"1",state:!e.errors.serving.count&&null},model:{value:e.editing.serving.count,callback:function(t){e.$set(e.editing.serving,"count",t)},expression:"editing.serving.count"}})],1)],1),n("b-col",{attrs:{cols:"3"}},[n("b-form-group",{staticClass:"m-0",attrs:{label:"Serving Size",state:!e.errors.serving.size&&!e.errors.serving.units&&null},scopedSlots:e._u([{key:"invalid-feedback",fn:function(){return[n("span",{staticClass:"w-50 float-left"},[e._v(e._s(e.errors.serving.size))]),n("span",{staticClass:"w-50 float-right"},[e._v(e._s(e.errors.serving.units))])]},proxy:!0}])},[n("b-input-group",[n("b-input",{attrs:{type:"number",min:"1",step:"0.25",state:!e.errors.serving.size&&null},model:{value:e.editing.serving.size,callback:function(t){e.$set(e.editing.serving,"size",t)},expression:"editing.serving.size"}}),n("b-select",{attrs:{state:!e.errors.serving.units&&null,options:e.allUnits,"value-field":"singular","text-field":e.editing.serving.size>1?"plural":"singular"},scopedSlots:e._u([{key:"first",fn:function(){return[n("b-select-option",{attrs:{value:void 0}},[e._v("-- Units --")])]},proxy:!0}]),model:{value:e.editing.serving.units,callback:function(t){e.$set(e.editing.serving,"units",t)},expression:"editing.serving.units"}})],1)],1)],1)],1),n("b-form-row",[n("b-col",[n("b-form-group",{staticClass:"m-0",attrs:{label:"Description"},scopedSlots:e._u([{key:"invalid-feedback",fn:function(){return[n("span",{staticClass:"float-left"},[e._v(e._s(e.errors.description))])]},proxy:!0},{key:"description",fn:function(){return[n("span",{staticClass:"float-right"},[e._v(e._s(e.editing.description.length)+"/1024")])]},proxy:!0}])},[n("b-textarea",{attrs:{state:!e.errors.description&&null,placeholder:"Enter description...",maxlength:"1024"},model:{value:e.editing.description,callback:function(t){e.$set(e.editing,"description",t)},expression:"editing.description"}})],1)],1)],1),n("h4",[e._v(" Image "),e.errors.image?n("b-btn",{staticClass:"text-danger",attrs:{variant:"link",disabled:""}},[e._v(e._s(e.errors.image))]):e._e()],1),n("b-list-group",[n("b-list-group-item",[n("b-input-group",{scopedSlots:e._u([{key:"append",fn:function(){return[n("b-btn",{attrs:{variant:"outline-danger"},on:{click:function(t){e.newImage=null,e.previewImage()}}},[n("fa-icon",{attrs:{icon:"trash-alt"}})],1)]},proxy:!0}])},[n("b-form-file",{attrs:{placeholder:"Choose an image...",state:!e.errors.image&&null,accept:"image/jpg, image/jpeg, image/png"},on:{input:e.previewImage},model:{value:e.newImage,callback:function(t){e.newImage=t},expression:"newImage"}})],1)],1),e.editing.image?n("b-list-group-item",[n("b-carousel",{staticClass:"bg-dark py-2 text-center rounded"},[n("b-carousel-slide",{scopedSlots:e._u([{key:"img",fn:function(){return[n("img",{staticClass:"rounded",staticStyle:{height:"20rem"},attrs:{src:e.imagePreview||e.editing.image}})]},proxy:!0}],null,!1,2411282111)})],1)],1):e._e()],1),n("h4",{staticClass:"pt-3"},[e._v(" Ingredients "),e.errors.ingredients?n("b-btn",{staticClass:"text-danger",attrs:{variant:"link"}},[e._v(e._s(e.errors.ingredients))]):e._e()],1),n("b-list-group",[e._l(e.editing.ingredients,(function(t,r){return n("b-list-group-item",{key:r},[n("b-form-group",{staticClass:"m-0",attrs:{state:!(e.errors.ingredients||e.errors.ingredient.length>0&&e.errors.ingredient.some((function(e){return Boolean(e.amount)||Boolean(e.units)||Boolean(e.name)})))&&null},scopedSlots:e._u([{key:"invalid-feedback",fn:function(){return[n("span",{staticClass:"float-left"},[n("span",{staticClass:"pr-2"},[e._v(e._s(e.errors.ingredient[r]?e.errors.ingredient[r].amount:""))]),n("span",{staticClass:"pr-2"},[e._v(e._s(e.errors.ingredient[r]?e.errors.ingredient[r].units:""))]),n("span",{staticClass:"pr-2"},[e._v(e._s(e.errors.ingredient[r]?e.errors.ingredient[r].name:""))])])]},proxy:!0},{key:"description",fn:function(){return[n("span",{staticClass:"float-right mr-5 pr-4"},[e._v(e._s(e.editing.ingredients[r].name.length)+"/64")])]},proxy:!0}],null,!0)},[n("b-input-group",{scopedSlots:e._u([{key:"append",fn:function(){return[n("b-btn",{attrs:{variant:"outline-danger",disabled:1===e.editing.ingredients.length},on:{click:function(t){return e.removeIngredient(r)}}},[n("fa-icon",{attrs:{icon:"trash-alt"}})],1),n("b-dropdown",{attrs:{variant:"outline-secondary"}},[n("b-dropdown-item",{attrs:{disabled:0===r},on:{click:function(t){return e.moveIngredient(r,"up")}}},[n("fa-icon",{attrs:{icon:"angle-up"}}),e._v("Move Up ")],1),n("b-dropdown-item",{attrs:{disabled:r===e.editing.ingredients.length-1},on:{click:function(t){return e.moveIngredient(r,"down")}}},[n("fa-icon",{attrs:{icon:"angle-down"}}),e._v("Move Down ")],1)],1)]},proxy:!0}],null,!0)},[n("b-input",{attrs:{placeholder:"Amount",type:"number",min:"0.25",step:"0.25",state:(!e.errors.ingredient[r]||!e.errors.ingredient[r].amount)&&null},model:{value:e.editing.ingredients[r].amount,callback:function(t){e.$set(e.editing.ingredients[r],"amount",t)},expression:"editing.ingredients[index].amount"}}),n("b-select",{attrs:{state:(!e.errors.ingredient[r]||!e.errors.ingredient[r].units)&&null,options:e.allUnits,"value-field":"singular","text-field":e.editing.ingredients[r].amount>1?"plural":"singular"},scopedSlots:e._u([{key:"first",fn:function(){return[n("b-select-option",{attrs:{value:void 0}},[e._v("-- Units --")])]},proxy:!0}],null,!0),model:{value:e.editing.ingredients[r].units,callback:function(t){e.$set(e.editing.ingredients[r],"units",t)},expression:"editing.ingredients[index].units"}}),n("b-input",{attrs:{placeholder:"Ingredient",maxlength:"64",state:(!e.errors.ingredient[r]||!e.errors.ingredient[r].name)&&null},model:{value:e.editing.ingredients[r].name,callback:function(t){e.$set(e.editing.ingredients[r],"name",t)},expression:"editing.ingredients[index].name"}})],1)],1)],1)})),n("b-list-group-item",[n("b-btn",{attrs:{variant:"outline-success",block:""},on:{click:e.addIngredient}},[e._v("Add Ingredient")])],1)],2),n("h4",{staticClass:"pt-3"},[e._v(" Steps "),e.errors.steps?n("b-btn",{staticClass:"text-danger",attrs:{variant:"link"}},[e._v(e._s(e.errors.steps))]):e._e()],1),n("b-list-group",[e._l(e.editing.steps,(function(t,r){return n("b-list-group-item",{key:r},[n("b-form-group",{staticClass:"m-0",attrs:{state:!(e.errors.steps||e.errors.step.length>0&&e.errors.step.some((function(e){return Boolean(e)})))&&null},scopedSlots:e._u([{key:"invalid-feedback",fn:function(){return[n("span",{staticClass:"float-left"},[e._v(e._s(e.errors.step[r]?e.errors.step[r]:""))])]},proxy:!0},{key:"description",fn:function(){return[n("span",{staticClass:"float-right mr-5 pr-4"},[e._v(e._s(e.editing.steps[r].length)+"/128")])]},proxy:!0}],null,!0)},[n("b-input-group",{attrs:{prepend:r+1+"."},scopedSlots:e._u([{key:"append",fn:function(){return[n("b-btn",{attrs:{variant:"outline-danger",disabled:1===e.editing.steps.length},on:{click:function(t){return e.removeStep(r)}}},[n("fa-icon",{attrs:{icon:"trash-alt"}})],1),n("b-dropdown",{attrs:{variant:"outline-secondary"}},[n("b-dropdown-item",{attrs:{disabled:0===r},on:{click:function(t){return e.moveStep(r,"up")}}},[n("fa-icon",{attrs:{icon:"angle-up"}}),e._v("Move Up ")],1),n("b-dropdown-item",{attrs:{disabled:r===e.editing.steps.length-1},on:{click:function(t){return e.moveStep(r,"down")}}},[n("fa-icon",{attrs:{icon:"angle-down"}}),e._v("Move Down ")],1)],1)]},proxy:!0}],null,!0)},[n("b-input",{attrs:{placeholder:"Step "+(r+1),maxlength:"128",state:!e.errors.step[r]&&null},model:{value:e.editing.steps[r],callback:function(t){e.$set(e.editing.steps,r,t)},expression:"editing.steps[index]"}})],1)],1)],1)})),n("b-list-group-item",[n("b-btn",{attrs:{variant:"outline-success",block:""},on:{click:e.addStep}},[e._v("Add Step")])],1)],2)],1)},qe=[],Je=(n("a4d3"),n("e01a"),n("c740"),n("ac1f"),n("3ca3"),n("2b3d"),n("5530")),Ye={name:"RecipeEdit",props:["recipe","recipes"],data:function(){return{editing:null,newImage:null,imagePreview:null,allUnits:Ae.list(),showSaved:!1,showSaving:!1,showError:!1,errors:null,imgChanged:!1}},methods:{addIngredient:function(){this.editing.ingredients.push({name:"",amount:1,units:void 0})},removeIngredient:function(e){this.editing.ingredients.splice(e,1)},moveIngredient:function(e,t){if("up"===t||"down"===t){var n=Object(ke["a"])(this.editing.ingredients);if("up"===t){var r=n[e-1];n[e-1]=n[e],n[e]=r}else if("down"===t){var i=n[e+1];n[e+1]=n[e],n[e]=i}this.editing.ingredients=n}},addStep:function(){this.editing.steps.push("")},removeStep:function(e){this.editing.steps.splice(e,1)},moveStep:function(e,t){if("up"===t||"down"===t){var n=Object(ke["a"])(this.editing.steps);if("up"===t){var r=n[e-1];n[e-1]=n[e],n[e]=r}else if("down"===t){var i=n[e+1];n[e+1]=n[e],n[e]=i}this.editing.steps=n}},previewImage:function(e){this.editing.changeImage=!0,this.newImage?(this.imagePreview=URL.createObjectURL(e),this.editing.image=e):(URL.revokeObjectURL(this.imagePreview),this.imagePreview=null,this.editing.image=null)},save:function(){var e=this;this.clearErrors(),this.showSaving=!0,this.editing.changeImage&&(this.editing.image=this.newImage),this.editing._id?Ee(this.editing).then((function(t){var n=t.status,r=t.data;switch(n){case M:e.recipes[e.recipes.findIndex((function(e){return e._id===r._id}))]=Object(Je["a"])(Object(Je["a"])({},r),{},{ingredients:Object(ke["a"])(r.ingredients),steps:Object(ke["a"])(r.steps)}),e.editing=Object(Je["a"])(Object(Je["a"])({},r),{},{ingredients:Object(ke["a"])(r.ingredients),steps:Object(ke["a"])(r.steps),changeImage:!1}),e.showSaving=!1,e.showSaved=!0,e.imgChanged=!1,e.imagePreview=e.editing.image,setTimeout((function(){return e.showSaved=!1}),3e3);break;case D:e.$emit("401");break;case P:e.fillErrors(r);break;default:e.showError=!0}})).catch((function(t){e.$emit("500",t)})).finally((function(){e.showSaving=!1})):je(this.editing).then((function(t){var n=t.status,r=t.data;switch(n){case I:e.recipes.push(Object(Je["a"])(Object(Je["a"])({},r),{},{ingredients:Object(ke["a"])(r.ingredients),steps:Object(ke["a"])(r.steps)})),e.editing=Object(Je["a"])(Object(Je["a"])({},r),{},{ingredients:Object(ke["a"])(r.ingredients),steps:Object(ke["a"])(r.steps),changeImage:!1}),e.showSaving=!1,e.showSaved=!0,e.imgChanged=!1,e.imagePreview=e.editing.image,setTimeout((function(){return e.showSaved=!1}),3e3);break;case D:e.$emit("401");break;case P:e.fillErrors(r);break;default:e.showError=!0}})).catch((function(t){e.$emit("500",t)}))},fillErrors:function(e){var t=this,n=e.errors;this.showSaving=!1,this.showError=!0,n.forEach((function(e){var n=e.param,r=e.msg,i=[];"title"===n?t.errors.title=r:"serving.count"===n?t.errors.serving.count=r:"serving.size"===n?t.errors.serving.size=r:"serving.units"===n?t.errors.serving.units=r:"description"===n?t.errors.description=r:"image"===n?t.errors.image=r:"ingredients"===n?t.errors.ingredients=r:(i=/^ingredients\[([0-9]+)\]\.amount/.exec(n))?(t.errors.ingredient[+i[1]]||(t.errors.ingredient[+i[1]]={}),t.errors.ingredient[+i[1]].amount=r):(i=/^ingredients\[([0-9]+)\]\.units/.exec(n))?(t.errors.ingredient[+i[1]]||(t.errors.ingredient[+i[1]]={}),t.errors.ingredient[+i[1]].units=r):(i=/^ingredients\[([0-9]+)\]\.name/.exec(n))?(t.errors.ingredient[+i[1]]||(t.errors.ingredient[+i[1]]={}),t.errors.ingredient[+i[1]].name=r):"steps"===n?t.errors.steps=r:(i=/^steps\[([0-9]+)\]/.exec(n))&&(t.errors.step[+i[1]]=r)}))},clearErrors:function(){this.showError=!1,this.errors={title:void 0,serving:{count:void 0,size:void 0,units:void 0},description:void 0,image:void 0,ingredients:void 0,ingredient:[],steps:void 0,step:[]}}},created:function(){this.editing=Object(Je["a"])(Object(Je["a"])({},this.recipe),{},{ingredients:Object(ke["a"])(this.recipe.ingredients),steps:Object(ke["a"])(this.recipe.steps),changeImage:!1}),this.imagePreview=this.editing.image||null,this.clearErrors()}},We=Ye,Ke=Object(u["a"])(We,Ve,qe,!1,null,null,null),Qe=Ke.exports,Xe={name:"Recipes",props:["user"],components:{RecipeCard:ze,RecipeView:Ge,RecipeEdit:Qe},data:function(){return{loading:!0,recipes:null,currentRecipe:null,mode:null}},methods:{openCreate:function(){this.currentRecipe={title:"",description:"",serving:{count:1,size:1,units:void 0},ingredients:[{name:"",amount:1,units:void 0}],steps:[""],image:void 0},this.mode="edit"},openEdit:function(e){this.currentRecipe=e,this.mode="edit"},openView:function(e){this.currentRecipe=e,this.mode="view"},doDeleteRecipe:function(e){var t=this;Me(e).then((function(n){var r=n.status;switch(r){case R:t.recipes=t.recipes.filter((function(t){return t._id!==e._id}));break;case D:t.$emit("401");break;default:t._500();break}})).catch((function(e){t._500(e)}))},close:function(){this.mode=null,this.currentRecipe=null},_500:function(e){this.$emit("500",e)}},mounted:function(){var e=this;Oe().then((function(t){var n=t.status,r=t.data;switch(n){case M:e.recipes=Object(ke["a"])(r),e.loading=!1;break;case D:e.$emit("401");break;default:e._500();break}})).catch((function(t){e._500(t)}))}},Ze=Xe,et=Object(u["a"])(Ze,ge,he,!1,null,null,null),tt=et.exports,nt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"container"},[n("h1",{staticClass:"border-bottom"},[e._v(" Cookbooks "),e.loading?n("b-spinner",{staticClass:"m-2",staticStyle:{"border-width":"4px"}}):e._e(),n("b-btn",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.left",modifiers:{hover:!0,left:!0}}],staticClass:"float-right m-1 my-2",attrs:{variant:"outline-success",title:"New Cookbook"},on:{click:function(t){return e.$refs.createCookbookModal.show()}}},[n("fa-icon",{attrs:{icon:"plus"}})],1)],1),n("CreateCookbookModal",{ref:"createCookbookModal",attrs:{cookbooks:e.cookbooks},on:{401:function(t){return e.$emit("401")},500:e._500}}),n("ShareCookbookModal",{ref:"shareCookbookModal",attrs:{cookbook:e.sharing},on:{401:function(t){return e.$emit("401")},500:e._500}}),e.cookbooks&&e.cookbooks.length>0?n("b-card-group",{attrs:{columns:""}},e._l(e.cookbooks,(function(t){return n("CookbookCard",{key:t._id,attrs:{cookbook:t,cookbooks:e.cookbooks,user:e.user},on:{401:function(t){return e.$emit("401")},500:e._500,open:function(e){},sharing:function(e){},deleteCookbook:e.doDeleteCookbook}})})),1):e.cookbooks&&0===e.cookbooks.length?n("h5",{staticClass:"text-center"},[e._v(" No cookbooks ")]):e._e()],1)},rt=[],it=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-modal",{attrs:{id:"createCookbook",scrollable:"","no-stacking":"",title:"New Cookbook"},on:{hidden:e.clear},scopedSlots:e._u([{key:"modal-header-close",fn:function(){return[n("fa-icon",{attrs:{icon:"times"}})]},proxy:!0},{key:"modal-footer",fn:function(){return[n("b-btn",{attrs:{variant:"outline-secondary"},on:{click:e.hide}},[e._v("Cancel")]),n("b-btn",{attrs:{variant:"success"},on:{click:e.submit}},[e._v("Create")])]},proxy:!0}])},[n("b-form-group",{attrs:{label:"Title"},scopedSlots:e._u([{key:"invalid-feedback",fn:function(){return[n("span",{staticClass:"float-left"},[e._v(e._s(e.error))])]},proxy:!0},{key:"description",fn:function(){return[n("span",{staticClass:"float-right"},[e._v(e._s(e.title.length)+"/64")])]},proxy:!0}])},[n("b-input",{attrs:{placeholder:"New Cookbook",state:!e.error&&null,maxlength:"64"},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.preventDefault(),e.submit(t))}},model:{value:e.title,callback:function(t){e.title=t},expression:"title"}})],1)],1)},ot=[],st="/api/cookbook",at=function(){return E($(st))},ct=function(e){return E(S(st,{title:e}),I)},lt=function(e){return E(j("".concat(st,"/").concat(e)),R)},ut={name:"NewCookbookModal",props:["cookbooks"],data:function(){return{title:"",error:""}},methods:{show:function(){this.$bvModal.show("createCookbook")},hide:function(){this.$bvModal.hide("createCookbook")},clear:function(){this.title="",this.error=""},submit:function(){var e=this;this.error="",ct(this.title).then((function(t){var n=t.status,r=t.data;switch(n){case I:console.log(r),e.cookbooks.push(r),e.hide();break;case D:e.$emit("401"),e.hide(),e.$router.push("/");break;case P:e.error=r.errors[0].msg;break;case z:e.error=r.error;break;default:e.$emit("500");break}})).catch((function(t){e.$emit("500",t)}))}}},dt=ut,ft=Object(u["a"])(dt,it,ot,!1,null,null,null),pt=ft.exports,mt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-modal",{attrs:{id:"shareCookbook",scrollable:"","no-stacking":"",title:"Share "+e.editing.title},on:{show:e.shown},scopedSlots:e._u([{key:"modal-header-close",fn:function(){return[n("fa-icon",{attrs:{icon:"times"}})]},proxy:!0},{key:"modal-footer",fn:function(){return[n("b-btn",{attrs:{variant:"outline-secondary"},on:{click:e.hide}},[e._v("Cancel")]),n("b-btn",{attrs:{variant:"success"},on:{click:e.submit}},[e._v("Save")])]},proxy:!0}])})},bt=[],vt={name:"ShareCookbookModal",props:["cookbook"],data:function(){return{sharing:null}},methods:{show:function(){this.$bvModal.show("shareCookbook")},hide:function(){this.$bvModal.hide("shareCookbook")},shown:function(){}}},gt=vt,ht=Object(u["a"])(gt,mt,bt,!1,null,null,null),kt=ht.exports,_t=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-card",{scopedSlots:e._u([{key:"footer",fn:function(){return[n("b-btn-toolbar",[e.cookbook.owner===e.user._id||e.cookbook.owner._id===e.user._id?n("b-btn-group",{attrs:{size:"sm"}},[n("b-btn",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.left",modifiers:{hover:!0,left:!0}}],attrs:{variant:"outline-danger",title:"Delete"},on:{click:function(t){return e.$emit("deleteCookbook",e.cookbook)}}},[n("fa-icon",{attrs:{icon:"trash-alt"}})],1),n("b-btn",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.right",modifiers:{hover:!0,right:!0}}],attrs:{variant:"outline-primary",title:"Sharing"},on:{click:function(t){return e.$emit("sharing",e.cookbook)}}},[n("fa-icon",{attrs:{icon:"users"}})],1)],1):n("b-btn-group",{attrs:{size:"sm"}},[n("b-btn",{attrs:{variant:"link",disabled:""},on:{click:function(e){e.preventDefault()}}},[e._v(" "+e._s(e.cookbook.owner.username)+" ")])],1)],1)]},proxy:!0}])},[n("b-card-title",{staticClass:"my-0"},[n("b-btn",{staticClass:"py-0",attrs:{variant:"link",size:"lg"},on:{click:function(t){return e.$emit("open",e.cookbook)}}},[e._v(" "+e._s(e.cookbook.title)+" ")])],1),n("b-card-body",[n("span",{staticClass:"float-left"},[e._v("Recipes: "+e._s(e.cookbook.recipes.length))]),n("span",{staticClass:"float-right"},[e._v("Shared: "+e._s(e.cookbook.shared.length))])])],1)},wt=[],yt={name:"CookbookCard",props:["cookbook","cookbooks","user"]},Ct=yt,xt=Object(u["a"])(Ct,_t,wt,!1,null,null,null),$t=xt.exports,St={name:"Cookbooks",props:["user"],components:{CreateCookbookModal:pt,ShareCookbookModal:kt,CookbookCard:$t},data:function(){return{loading:!0,currentCookbook:null,cookbooks:null,sharing:null}},methods:{doDeleteCookbook:function(e){var t=this;lt(e._id).then((function(n){var r=n.status;switch(r){case R:t.cookbooks=t.cookbooks.filter((function(t){return t._id!==e._id}));break;case D:t.$emit("401");break;default:t._500();break}})).catch((function(e){t._500(e)}))},_500:function(e){this.$emit("500",e)}},mounted:function(){var e=this;at().then((function(t){var n=t.status,r=t.data;switch(n){case M:e.cookbooks=r,e.loading=!1;break;case D:e.$router.push("/"),e.$emit("401");break;default:e._500();break}})).catch((function(t){e._500(t)}))}},Ot=St,jt=Object(u["a"])(Ot,nt,rt,!1,null,null,null),Et=jt.exports,Mt=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},It=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"container text-center mt-2"},[n("h1",{staticClass:"border-bottom"},[e._v("Server Error")]),n("p",[e._v("It looks like we ran into an unexpected error. Sorry for any inconvenience. We'll get that fixed as soon as possible.")])])}],Rt={name:"ServerError"},Dt=Rt,zt=Object(u["a"])(Dt,Mt,It,!1,null,null,null),Pt=zt.exports,Ft=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"container mt-2 text-center"},[n("h1",{staticClass:"border-bottom"},[e._v("404 - Page Not Found")]),n("p",[e._v(" Looks like the page at "),n("code",[e._v(e._s(this.$route.params.pathMatch))]),e._v(" doesn't exist! ")])])},Lt=[],Ut={name:"PageNotFound"},Nt=Ut,At=Object(u["a"])(Nt,Ft,Lt,!1,null,null,null),Bt=At.exports;r["default"].use(ie["a"]);var Tt=[{path:"/",name:"Home",component:ue},{path:"/profile",name:"Profile",component:ve,meta:{needsAuth:!0}},{path:"/recipes",name:"Recipes",component:tt,meta:{needsAuth:!0}},{path:"/cookbooks",name:"Cookbooks",component:Et,meta:{needsAuth:!0}},{path:"/500",name:"500",component:Pt},{path:"*",name:"404",component:Bt}],Ht=new ie["a"]({routes:Tt,linkActiveClass:"active",linkExactActiveClass:"active"});Ht.beforeEach((function(e,t,n){if(e.meta.needsAuth&&!localStorage.getItem("token")){var r=new Error;r.message=e.path,r.name="NotLoggedIn",n(r)}else n()})),Ht.afterEach((function(e,t){document.title=e.name+" - CookShare"}));var Gt=Ht,Vt=n("5f5b"),qt=n("ecee"),Jt=n("c074"),Yt=n("f2d1"),Wt=n("b702"),Kt=n("ad3d");n("f9e3"),n("2dd8");qt["c"].add(Jt["a"]),qt["c"].add(Yt["a"]),qt["c"].add(Wt["a"]),r["default"].component("fa-icon",Kt["a"]),r["default"].use(Vt["a"]),r["default"].config.productionTip=!1,new r["default"]({router:Gt,render:function(e){return e(re)}}).$mount("#app")},"85ec":function(e,t,n){}});
//# sourceMappingURL=app.78afd2e4.js.map